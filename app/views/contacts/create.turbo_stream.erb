<% if @contact.persisted? %>
  <%= turbo_stream.prepend "contacts", @contact %>
  
  <%= turbo_stream.update("new_contact_form") { render "form", contact: Contact.new } %>
  <turbo-stream action="dispatch_event" name="dialog:close"></turbo-stream>

<% else %>
  <%= turbo_stream.update "new_contact_form" do %>
    <%= render "form", contact: @contact %>
  <% end %>
<% end %>

<%= turbo_stream.update "flash_messages", 
      partial: "shared/flash", 
      locals: { notice: flash.now[:notice], alert: flash.now[:alert] } %>
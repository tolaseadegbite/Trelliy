<%= tag.div id: dom_id(event), class: "card p-4 border" do %>
    <div class="flex items-center gap justify-between mbe-2">
        <%= link_to event, data: { turbo_frame: "_top" } do %>
            <h3 class="font-semibold"><%= event.name %></h3>
        <% end %>

        <div contents data-controller="popover" data-popover-placement-value="bottom-end">
            <button type="button" class="btn btn--icon btn--subtle" data-popover-target="trigger" popovertarget="popover-<%= event.id %>" aria-haspopup="true">
                <span class="icon icon--ellipsis" aria-hidden="true"></span>
            </button>

            <div popover id="popover-<%= event.id %>" class="popover" style="--popover-size: 8rem;" data-popover-target="content" role="menu" aria-label="Menu">
                <div class="menu" data-controller="menu" data-action="keydown->menu#navigate">

                <%= link_to "Edit", edit_event_path(event),
                            class: "btn menu__item w-full text-left",
                            data: { turbo_frame: "modal" } %>

                <% delete_trigger = button_tag "Delete", type: "button", class: "btn menu__item w-full text-left text-red-500 hover:text-red-600 focus:text-red-600", data: { action: "dialog#showModal", menu_target: "item" }, role: "menuitem" %>
                <%= modal_dialog delete_trigger, size: "450px", title: "Delete #{event.name}'?" do %>
                    <p class="text-sm text-subtle mbe-4">This will permanently delete this event. This action cannot be undone.</p>
                    <div class="flex items-center justify-end gap">
                    <button type="button" class="btn" data-action="click->dialog#close">Cancel</button>
                    <%= button_to "Continue", event, method: :delete, class: "btn btn--negative" %>
                    </div>
                <% end %>
                </div>
            </div>
        </div>
    </div>

    <div class="flex items-center gap justify-between">
        <p class="text-sm text-subtle"><%= event.starts_at.strftime("%A, %B %d, %Y at %I:%M %p") %></p>
        <p class="text-sm text-subtle">Ends at: <%= event.ends_at.strftime("%A, %B %d, %Y at %I:%M %p") %>, Duration: <%= pluralize(event.duration_in_minutes, "minute") %></p>
    </div>
<% end %>